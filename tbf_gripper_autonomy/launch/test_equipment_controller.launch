<launch>
<!--    START AT RECOGNITION AT JM-->
<!--    <include file="$(find tbf_gripper_perception)/launch/recognition.launch" /> -->
    <arg name="service_name"       default="locate_ssb_in_cloud"/>
    <arg name="cloud_topic"        default="/gripper_d435/depth_registered/points"/>
    <arg name="record"              default="false" />

    <node name="equipment_handler" pkg="tbf_gripper_autonomy" type="EquipmentTask.py" respawn="false" output="screen">
        <rosparam command="load" file="$(find tbf_gripper_autonomy)/config/smart_equipment.yaml"/>
        <rosparam command="load" file="$(find tbf_gripper_autonomy)/config/moveit_params.yaml"/>
        <rosparam command="load" file="$(find tbf_gripper_autonomy)/config/arm_params.yaml"/>
        <rosparam command="load" file="$(find tbf_gripper_autonomy)/config/hand_params.yaml"/>
        <rosparam command="load" file="$(find tbf_gripper_autonomy)/config/pose_client.yaml"/>
        <param name="service_name" value="$(arg service_name)"/>
        <param name="cloud_topic" value="$(arg cloud_topic)"/>
    </node>

    <node pkg="tubaf_tools" type="marker_confirm.py" name="confirm_plan_marker" respawn="true" output="log">
        <rosparam command="load" file="$(find tubaf_tools)/config/marker_confirm_move_planning.yaml"/>
        <param name="service_ns" value="/equipment_handler/confirm_plan"/>
    </node>

    <include file="$(find tbf_gripper_launch)/launch/bag_equipment_handling.launch" if="$(arg record)" />
</launch>
